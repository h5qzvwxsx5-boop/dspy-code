# MCP Server Configuration Examples for DSPy Code
#
# This file shows example configurations for various MCP servers.
# Copy the relevant sections to your dspy_config.yaml file.

name: my-dspy-project
version: 0.1.0
dspy_version: 2.4.0

# MCP Server Configurations
mcp_servers:

  # Example 1: Filesystem Server (stdio transport)
  # Provides access to local files and directories
  # Requires Node.js (for npx)
  filesystem:
    name: filesystem
    description: "Local filesystem access"
    enabled: true
    auto_connect: false
    transport:
      type: stdio
      command: npx
      args:
        - -y
        - "@modelcontextprotocol/server-filesystem"
        - /Users/username/projects
        - /Users/username/data
      env:
        NODE_ENV: production
    timeout_seconds: 30
    retry_attempts: 3

  # Example 2: GitHub Server (SSE transport)
  # Provides access to GitHub API
  github:
    name: github
    description: "GitHub API access"
    enabled: true
    auto_connect: false
    transport:
      type: sse
      url: https://api.github.com/mcp
      headers:
        Authorization: "Bearer ${GITHUB_TOKEN}"
        Accept: "application/vnd.github.v3+json"
      auth_type: bearer
      auth_token: "${GITHUB_TOKEN}"
    timeout_seconds: 60
    retry_attempts: 3

  # Example 3: PostgreSQL Server (stdio transport)
  # Provides database access
  postgres:
    name: postgres
    description: "PostgreSQL database access"
    enabled: true
    auto_connect: false
    transport:
      type: stdio
      command: uvx
      args:
        - mcp-server-postgres
      env:
        POSTGRES_CONNECTION_STRING: "${DATABASE_URL}"
    timeout_seconds: 45
    retry_attempts: 2

  # Example 4: Brave Search Server (stdio transport)
  # Provides web search capabilities
  brave_search:
    name: brave_search
    description: "Brave Search API"
    enabled: true
    auto_connect: false
    transport:
      type: stdio
      command: uvx
      args:
        - mcp-server-brave-search
      env:
        BRAVE_API_KEY: "${BRAVE_API_KEY}"
    timeout_seconds: 30
    retry_attempts: 3

  # Example 5: Custom WebSocket Server
  # For custom MCP servers using WebSocket
  custom_ws:
    name: custom_ws
    description: "Custom WebSocket MCP server"
    enabled: true
    auto_connect: false
    transport:
      type: websocket
      url: ws://localhost:8080/mcp
    timeout_seconds: 45
    retry_attempts: 2

  # Example 6: Slack Server (SSE transport)
  # Provides Slack integration
  slack:
    name: slack
    description: "Slack workspace integration"
    enabled: false  # Disabled by default
    auto_connect: false
    transport:
      type: sse
      url: https://slack.com/api/mcp
      headers:
        Authorization: "Bearer ${SLACK_BOT_TOKEN}"
      auth_type: bearer
      auth_token: "${SLACK_BOT_TOKEN}"
    timeout_seconds: 60
    retry_attempts: 3

# Environment Variables
# Set these in your shell or .env file:
#
# export GITHUB_TOKEN="ghp_your_token_here"
# export DATABASE_URL="postgresql://user:pass@localhost/db"
# export BRAVE_API_KEY="your_brave_api_key"
# export SLACK_BOT_TOKEN="xoxb-your-token"

# Usage Examples:
#
# 1. Add a server:
#    dspy-code mcp add filesystem --transport stdio --command npx --args -y "@modelcontextprotocol/server-filesystem" /path/to/directory
#
# 2. Connect to a server:
#    dspy-code mcp connect filesystem
#
# 3. List tools:
#    dspy-code mcp tools filesystem
#
# 4. In interactive mode:
#    /mcp-connect filesystem
#    /mcp-tools
#    /mcp-call filesystem read_file {"path": "data.json"}
